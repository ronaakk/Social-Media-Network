{% extends "network/layout.html" %}
{% load static %}

{% block extra_head %}
    <script src= {% static 'network/js/posts.js' %} type="text/javascript"></script>
    <link rel="stylesheet" href= {% static 'network/css/post-section.css' %}>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
{% endblock extra_head %}

{% block body %}
    {% if user_profile %}
        <div class="post-section">
            <form id="tweet-form" method="post" enctype="multipart/form-data">
                <div class="post-section-row">
                    <a class="creator" href="{% url 'change_profile' %}"> 
                        <img src="{{ user_profile.profile_picture.url }}" class="profile-pic small-post-section" >
                    </a>
                    <textarea id="post-content" name="tweet" placeholder="What's Happening?" oninput="autoExpand(this); checkCharacterCount(this)"></textarea>
                </div>

                <!-- To display tweet image preview and delete functionality -->
                <div id="tweet-picture-preview">
                    <div class="image-container">
                    </div>
                </div>

                <div class="post-section-row">
                    <div class="error-message"></div>
                    <div class="tweet-actions">
                        <label for="tweet-picture" title="Upload Picture">
                            <span class="material-symbols-outlined image-button">photo_library</span>
                            <span class="tooltiptext">Upload Picture</span>
                        </label>        
                        <input type="file" id="tweet-picture" name="tweet-picture" class="file-input" accept="image/jpeg, image/png, image/gif, image/jpg" onchange="previewTweetImage(event)">                
                        <input type="submit" id="post-button" value="Post">
                    </div>
                </div>
            </form>
        </div>
    {% endif %}

    <div class="posts">
        <!-- TODO: Clicking on a post should go to a separate page and show all comments, etc. -->
        <div class="post hidden">

            <div class="post-layout">
                <a href="{% url 'change_profile' %}">
                    <img src="{{ user_profile.profile_picture.url }}" class="profile-pic small-post-section tweet-creator">
                </a>

                <!-- Actual post content (profile image, username, tweet, and image) -->
                <div class="section-row"> 
                    <div class="tweet-details"> 
                        {% comment %} <a href="{% url 'view_profile' user.id %}">  {% endcomment %}
                        <div class="tweet-header">
                            <input type="hidden" id="tweet-username" value="{{ user_profile.user }}">
                            <p class="username-post"></p>
                            <p class="date-posted"></p>
                        </div>
                        
                        {% comment %} </a> {% endcomment %}
                        <p class="tweet"></p>
                        
                        <div class="tweet-details__image">
                            <img src="" class="posted-tweet-picture">
                        </div>

                        <!-- Edit/Delete a post (given creator is authenticated), Likes, Comments (give this div a class of "tweet-actions") -->
                        <div class="tweet-actions-post">
                            <div class="tweet-actions-section">
                                <div class="edit-section">
                                    <!-- Edit Button -->
                                    <button class="edit-button">
                                        <span class="material-symbols-outlined">edit_square</span>
                                        <span class="tooltiptext">Edit Post</span>
                                    </button>
                                </div>

                                <div class="like-section">
                                    <!-- Like Button -->
                                    <button class="like-button">
                                        <span class="material-symbols-outlined">favorite</span>
                                        <span class="tooltiptext">Like</span>
                                    </button>
                                    <!-- Like Counter -->
                                    <span class="like-counter"></span>
                                </div>
                                
                                <div class="comment-section">
                                    <!-- Comment Button -->
                                    <button class="comment-button">
                                        <span class="material-symbols-outlined">chat_bubble</span>
                                        <span class="tooltiptext">Comment</span>
                                    </button>
                                    <!-- Comment Counter -->
                                    <span class="comment-counter"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}