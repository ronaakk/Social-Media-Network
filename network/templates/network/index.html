{% extends "network/layout.html" %}
{% load static %}


{% block extra_head %}
    <script src= {% static 'network/js/posts.js' %} type="text/javascript"></script>
    <link rel="stylesheet" href= {% static 'network/css/post-section.css' %}>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
{% endblock extra_head %}



{% block body %}
    {% if user_profile %}
        <div class="post-section">
            <form id="tweet-form" method="post">
                <div class="post-section-row">
                    <a class="creator" href="{% url 'change_profile' %}"> 
                        <img src="{{ user_profile.profile_picture.url }}" class="profile-pic small-post-section" >
                    </a>
                    <textarea id="post-content" name="tweet" placeholder="What's Happening?" oninput="autoExpand(this); checkCharacterCount(this)"></textarea>
                </div>

                <!-- To display tweet image preview and delete functionality -->
                <div id="tweet-picture-preview" style="display: none;"></div>

                <div class="post-section-row">
                    <div class="error-message"></div>
                    <div class="tweet-actions">
                        <label for="tweet-picture" title="Upload Picture">
                            <span class="material-symbols-outlined">photo_library</span>
                            <span class="tooltiptext">Upload Picture</span>
                        </label>
                        <input type="file" name="tweet-picture" id="tweet-picture" class="file-input" accept="image/jpeg, image/png, image/gif, image/jpg" onchange="previewTweetImage(event)">
                        <input type="submit" id="post-button" value="Post">
                    </div>
                </div>
            </form>
        </div>
    {% endif %}

    <div class="posts">
        <!-- TODO: Clicking on a post should go to a separate page and show all comments, etc. -->
        <div class="post hidden">

            <!-- Actual post content (profile image, username, tweet, and image) -->
            <div class="section-row"> 
                <a href="{% url 'change_profile' %}"> 
                    <img src="" class="profile-pic small-post-section tweet-creator" data-profile-picture="{{ user_profile.profile_picture.url }}">
                    <!-- <img src="{{ user_profile.profile_picture.url }}" class="profile-pic small-post-section" > -->
                </a> {% endcomment %}
                <div class="tweet-details"> 
                    <a href="{% url 'view_profile' user.id %}"> 
                        <input type="hidden" id="tweet-username" value="{{ username }}">
                        <p class="username"></p>
                    </a>
                    <p class="tweet"></p>
                    <img src="" class="tweet-picture">
                </div>
            </div>

            <!-- Edit/Delete a post (given creator is authenticated), Likes, Comments (give this div a class of "tweet-actions") -->
            <div class="section-row">
                {% comment %} Edit/Delete post (Need to make dropdown using JS)
                <label for="tweet-picture" title="Edit post">
                    <span class="material-symbols-outlined">more_horiz</span>
                    <span class="tooltiptext">Edit Post</span>
                </label>

                Like button
                <button class="like-button">
                    <span class="material-symbols-outlined">favorite</span>
                </button>

                Like counter
                <span class="like-counter">0 Likes</span>

                Comment button
                <button class="like-button">
                    <span class="material-symbols-outlined">chat_bubble</span>
                </button>

                Comment counter
                <span class="like-counter">0 Comments</span> {% endcomment %}
            </div>

        </div>
    </div> 

{% endblock %}